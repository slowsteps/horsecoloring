package  {		import flash.events.MouseEvent;	import flash.events.TouchEvent;	import flash.ui.Multitouch;	import flash.ui.MultitouchInputMode;		import flash.events.Event;			import flash.display.MovieClip;	import flash.events.Event;	import com.greensock.TweenLite;	import com.greensock.TweenMax;		import com.greensock.*;	import com.greensock.easing.*;	import flash.media.Sound			public class Mainmenu extends MovieClip {				var mymain:Main		var achievementslist		var thumbs:Array		var restore:MovieClip		public var inappManager:InappManager						public function Mainmenu(inMain) {						mymain = inMain			showDrawingPreviews()						this.consolebutton.addEventListener(MouseEvent.CLICK,toggleConsole)			this.clearconsolebutton.addEventListener(MouseEvent.CLICK,clearConsole)			this.clearcookiebutton.addEventListener(MouseEvent.CLICK,clearCookie)			this.testbuybutton.addEventListener(MouseEvent.CLICK,onTestBuy)			addEventListener("inappcancelled",onCancel) 						if (!mymain.payingUser) {				restore = new RestoreButton()				addChild(restore)				restore.x = mymain.gameWidth - restore.width - mymain.padding				restore.y = restore.height/2 + mymain.padding				restore.addEventListener(MouseEvent.CLICK,this.onRestorePurchase)				mymain.dispatcher.addEventListener(CustomEvent.ON_INAPP_CANCELLED,onRestoreCancel)				mymain.dispatcher.addEventListener(CustomEvent.ON_INAPP_BUY,onPaid)			}					}				private function onTestBuy(e) {			trace("testbuy")			mymain.alert("test buy")			mymain.dispatcher.dispatchEvent(new CustomEvent(CustomEvent.ON_INAPP_BUY))		}					private function onCancel(e:Event) {			trace("cancel received in mainmenu")		}					function clearCookie(e:Event) {			mymain.cookie.clear()			mymain.alert("Cookie cleared")					}						private function onRestorePurchase(e:Event) {			restore.removeEventListener(MouseEvent.CLICK,this.onRestorePurchase)			restore.alpha=0.5			mymain.alert("restore starting..please wait")			this.inappManager = new InappManager(this.mymain,"restore")			TweenMax.to(restore,0.3,{alpha:0.5,yoyo:true,repeat:-1,overwrite:false})		}				private function onRestoreCancel(e:Event) {			restore.addEventListener(MouseEvent.CLICK,this.onRestorePurchase)			restore.alpha=1.0			mymain.alert("restored canncelled or failed")			TweenMax.to(restore,0.3,{alpha:1.0,yoyo:false,overwrite:true})		}						private function onPaid(e:Event) {			restore.visible = false		}				//make array of drawings, loop though them and display,				private function showDrawingPreviews() {			thumbs = new Array() 			var thumb:Thumbnail = new Thumbnail(this,mymain,new Horsedrawing(),0,new IconHorse())			thumb.x = 100			thumb.y = 200			thumb.cost = 0			thumb.openSound = new HorseSound()			addChild(thumb)						thumbs.push(thumb)						var thumb = new Thumbnail(this,mymain,new Cardrawing(),1,new IconCar())			thumb.x = 400			thumb.y = 200			thumb.cost = 5						addChild(thumb)			thumbs.push(thumb)												var thumb = new Thumbnail(this,mymain,new Rocketdrawing(),2,new IconRocket())			thumb.x = 700			thumb.y = 200			thumb.cost = 50						addChild(thumb)			thumbs.push(thumb)												var thumb = new Thumbnail(this,mymain,new Dolphindrawing(),3,new IconDolphin())			thumb.x = 100			thumb.y = 450			thumb.cost = 100			//			addChild(thumb)			thumbs.push(thumb)									var thumb = new Thumbnail(this,mymain,new Unicorndrawing(),4,new IconUnicorn())			thumb.x = 400			thumb.y = 450			thumb.cost = 100			//			addChild(thumb)			thumbs.push(thumb)						var thumb = new Thumbnail(this,mymain,new Giraffedrawing(),5,new IconGiraffe())			thumb.x = 700			thumb.y = 450			thumb.cost = 100			//			addChild(thumb)			thumbs.push(thumb)													}						public function show() {						x=-mymain.gameWidth			visible = true			mymain.gameState = "mainmenu"			TweenLite.to(this, 0.5, {x:0, ease:Cubic.easeInOut});					}								public function hide() {			TweenLite.to(this, 0.5, {x:-mymain.gameWidth, ease:Cubic.easeInOut, onComplete:toggleVisibility});						mymain.gameState = "coloring"		}				private function toggleVisibility() {			this.visible = false		}		private function toggleAchievementsList(e:Event) {			if (achievementslist.visible == false ) {				achievementslist.visible = true			}			else achievementslist.visible = false		}		private function toggleConsole(e:Event) {			if (mymain.console.mytextfield.visible == false ) {				mymain.console.mytextfield.visible = true			}			else mymain.console.mytextfield.visible = false		}		private function clearConsole(e:Event) {			mymain.console.mytextfield.text = "cleared"		}					}	}
package  {		import flash.events.MouseEvent;	import flash.events.TouchEvent;	import flash.ui.Multitouch;	import flash.ui.MultitouchInputMode;	import flash.events.Event;	import flash.display.MovieClip;	import flash.events.Event;	import com.greensock.TweenLite;	import com.greensock.*;	import com.greensock.easing.*;			public class Thumbnail extends MovieClip {				private var mymain:Main		private var mymainmenu:Mainmenu		private var myDrawingNumber:int		private var myDrawingClip:MovieClip		public var cost:int		private var padlock:MovieClip						public function Thumbnail(inmymainmenu:Mainmenu,inmain:Main, drawingClip:MovieClip, drawingNumber:int,drawingicon:MovieClip=null) {						mymain = inmain			mymainmenu = inmymainmenu			myDrawingNumber = drawingNumber			myDrawingClip = drawingClip			 			//this.addChild(drawingClip)			if (drawingicon) this.addChild(drawingicon)						if (mymain.payingUser) {				mymain.console.log("not showing any padlocks, paying user")			}			else {				mymain.console.log("showing padlock, free user")				padlock = new Padlock()				padlock.x = 100				padlock.y = 80				addChild(padlock)								restore.addEventListener(MouseEvent.CLICK,this.onRestorePurchase)				buy.addEventListener(MouseEvent.CLICK,onBuy)			}		}								public function checkLock() {						this.textfield.text = "" + cost						var isopen:Boolean = false						//PAYING USER			if(mymain.payingUser) {				mymain.console.log("paying user: hiding padlock, buy and restore button")				padlock.visible = false				buy.visible = false				restore.visible = false				isopen = true			}						//ENOUGH STARS TO OPEN			if (!mymain.payingUser && cost<=mymain.achievementManager.getAchievementsList().count) {				mymain.console.log("Padlock " + this.myDrawingNumber + " closed")				padlock.visible = false				buy.visible = false				restore.visible = false				isopen = true			}						//FREE USER, NOT ENOUGH STARS			if (!mymain.payingUser && cost>mymain.achievementManager.getAchievementsList().count) {				mymain.console.log("Padlock " + this.myDrawingNumber + " closed")				padlock.visible = true				buy.visible = true				restore.visible = true				isopen = false			}						if (isopen) openLock()					}				public function openLock() {						mymain.console.log("Padlock " + this.myDrawingNumber + " opening")			//MAKE THUMB CLICKABLE			removeEventListener(MouseEvent.MOUSE_DOWN,onSelect)			removeEventListener(TouchEvent.TOUCH_TAP,onSelect)				addEventListener(MouseEvent.MOUSE_DOWN,onSelect)			addEventListener(TouchEvent.TOUCH_TAP,onSelect)				//OPENING ANIM, SHOULD BE SHOWN ONLY ONCE			TweenLite.to(padlock, 2, {y:-500, alpha:0, ease:Cubic.easeInOut, onComplete:openThumb, delay:1});			padlock.visible = false			buy.visible = false			restore.visible = false		}						private function openThumb() {			padlock.visible = false		}				private function onBuy(e:Event) {			mymain.console.log("buy button clicked")			//mymain.inAppManager.makePurchase()			new InappManager(this.mymain,"purchase")		}				private function onRestorePurchase(e:Event) {			mymain.console.log("restore clicked")			//mymain.inAppManager.restore_Transactions()			new InappManager(this.mymain,"restore")					}				private function onSelect(e:Event) {			mymain.selectDrawing(myDrawingClip);			mymainmenu.hide()		}											}	}